@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-8">
        <div class="row">
            <div class="col-md-12 calendar calendar-background" style="padding: 0px;">
                <h3>Weekly</h3>
                <div style="display:block;">
                    @foreach (var day in Model.DaysOfTheWeek)
                    {
                        <div class="week-day">
                            <p>@day.Name</p>
                            @if (day.ClosedStores.Any())
                            {
                                @foreach (var store in day.ClosedStores)
                                {
                                    <p><a href="@store.URL" target="_blank">@store.Text</a> Closed</p>
                                }
                            }
                            @if (day.ClosedStoresOnSunnyDays.Any())
                            {
                                @foreach (var store in day.ClosedStoresOnSunnyDays)
                                {
                                    <p><a href="@store.URL" target="_blank">@store.Text</a> Closed if Sunny</p>
                                }
                            }
                            @if (day.EarlyStoreClosures.Any())
                            {
                                @foreach (var store in day.EarlyStoreClosures)
                                {
                                    <p>
                                        <a href="@store.Item1.URL" target="_blank">@store.Item1.Text</a> closes at @store.Item2
                                    </p>
                                }
                            }
                            @if (day.TravelingCartOpen)
                            {
                                <p>
                                    <a href="@Model.TravelingCart.URL" target="_blank">@Model.TravelingCart.Text</a>
                                    available
                                </p>
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 calendar calendar-background">
                <h3>Spring</h3>
                @foreach (var day in Model.Days)
                {
                <div class="calendar-day">
                    <h3 class="pull-right small-margin">@day</h3>
                    @if (Model.CalendarDays.Any(x => x.DayOfMonth == day))
                    {
                        var dayInfo = Model.CalendarDays.First(x => x.DayOfMonth == day);

                        if (dayInfo.Festival != null)
                        {
                            <div>
                                <img src="~/images/Calendar_Flag_Anim.gif" class="small-margin" />
                                <a href="@dayInfo.Festival.URL" target="_blank">@dayInfo.Festival.Text</a>
                            </div>
                        }
                        if (dayInfo.Birthday != null)
                        {
                            <p class="small-margin">
                                <img src="@dayInfo.Birthday.IconURL" />
                                <a href="@dayInfo.Birthday.Link.URL" target="_blank">@dayInfo.Birthday.Link.Text</a>'s Birthday
                            </p>
                        }

                        if (dayInfo.Notes.Any())
                        {
                            @foreach (var note in dayInfo.Notes)
                            {
                                <b class="no-margin text-warning">@note</b>
                            }
                        }

                        if (dayInfo.FirstDayToPlant.Any())
                        {
                            var crops = dayInfo.FirstDayToPlant.Select(x => x.Link.Text);
                            <p class="no-margin text-success" 
                               title="Plant these crops on of before today for an optimal number of harvests if not using Speed Gro OR Agriculturalist">
                                0%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.FirstDayToPlantTen.Any())
                        {
                            var crops = dayInfo.FirstDayToPlantTen.Select(x => x.Link.Text);
                            <p class="no-margin text-success" 
                               title="Plant these crops on of before today for an optimal number of harvests if using Speed Gro OR Agriculturalist">
                                10%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.FirstDayToPlantTwenty.Any())
                        {
                            var crops = dayInfo.FirstDayToPlantTwenty.Select(x => x.Link.Text);
                            <p class="no-margin text-success" 
                               title="Plant these crops on of before today for an optimal number of harvests if using Speed Gro and Agriculturalist">
                                20%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.FirstDayToPlantTwentyFive.Any())
                        {
                            var crops = dayInfo.FirstDayToPlantTwentyFive.Select(x => x.Link.Text);
                            <p class="no-margin text-success" 
                               title="Plant these crops on of before today for an optimal number of harvests if using Deluxe Speed Gro">
                                25%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.FirstDayToPlantThirtyFive.Any())
                        {
                            var crops = dayInfo.FirstDayToPlantThirtyFive.Select(x => x.Link.Text);
                            <p class="no-margin text-success" 
                               title="Plant these crops on of before today for an optimal number of harvests if using Deluxe Speed Gro and Agriculturalist">
                                35%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.LastDayToPlant.Any())
                        {
                            var crops = dayInfo.LastDayToPlant.Select(x => x.Link.Text);
                            <p class="no-margin text-danger" 
                               title="Last chance for a harvest if not using Speed Gro OR Agriculturalist">
                                0%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.LastDayToPlantTen.Any())
                        {
                            var crops = dayInfo.LastDayToPlantTen.Select(x => x.Link.Text);
                            <p class="no-margin text-danger" 
                               title="Last chance for a harvest if using Speed Gro OR Agriculturalist">
                                10%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.LastDayToPlantTwenty.Any())
                        {
                            var crops = dayInfo.LastDayToPlantTwenty.Select(x => x.Link.Text);
                            <p class="no-margin text-danger" 
                               title="Last chance for a harvest if using Speed Gro and Agriculturalist">
                                20%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.LastDayToPlantTwentyFive.Any())
                        {
                            var crops = dayInfo.LastDayToPlantTwentyFive.Select(x => x.Link.Text);
                            <p class="no-margin text-danger" 
                               title="Last chance for a harvest if using Deluxe Speed Gro">
                                25%: @String.Join(", ", crops)
                            </p>
                        }

                        if (dayInfo.LastDayToPlantThirtyFive.Any())
                        {
                            var crops = dayInfo.LastDayToPlantThirtyFive.Select(x => x.Link.Text);
                            <p class="no-margin text-danger" 
                               title="Last chance for a harvest if using Deluxe Speed Gro and Agriculturalist">
                                35%: @String.Join(", ", crops)
                            </p>
                        }
                    }
                </div>
                }
            </div>
        </div>
    </div>
    <div class="col-md-2 calendar-background">
        <h3>Daily</h3>
        @foreach (var time in Model.TimesOfDay)
        {
            <div class="time-of-day">
                <b>@time.Time</b>
                @if (time.StoresOpeningAtTime.Any())
                {
                    @foreach (var store in time.StoresOpeningAtTime)
                    {
                        <p class="no-margin">
                            <a href="@store.URL" target="_blank">@store.Text</a>
                            <b class="opens">open</b>
                        </p>
                    }
                }
                @if (time.StoresClosingAtTime.Any())
                {
                    @foreach (var store in time.StoresClosingAtTime)
                    {
                        <p class="no-margin">
                            <a href="@store.URL" target="_blank">@store.Text</a>
                            <b class="closes">closed</b>
                        </p>
                    }
                }
            </div>
        }
    </div>
    <div class="col-md-1"></div>
</div>
<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10 calendar-background">
        <table class="table">
            <thead>
                <tr>
                    <th>Crop</th>
                    <th>Seed Price</th>
                    <th>Sell Price</th>
                    <th>Regrows?</th>
                    <th>Harvests:</th>
                    <th>10%:</th>
                    <th>20%:</th>
                    <th>25%:</th>
                    <th>35%:</th>
                    <th>Gold per day:</th>
                    <th>10%:</th>
                    <th>20%:</th>
                    <th>25%:</th>
                    <th>35%:</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var crop in Model.CropsInSeason)
                {
                <tr>
                    <td>@crop.Link.Text</td>
                    <td>@crop.SeedPrice</td>
                    <td>@crop.SellPrice</td>
                    @if (crop.MultipleHarvests)
                    {
                        <td>Yes</td>

                    }
                    else
                    {
                        <td>No</td>
                    }
                    <td>@crop.CalculatedValues.MaxHarvests.Normal</td>
                    <td>@crop.CalculatedValues.MaxHarvests.SpeedGroOrAgriculturalist</td>
                    <td>@crop.CalculatedValues.MaxHarvests.SpeedGroAndAgriculturalist</td>
                    <td>@crop.CalculatedValues.MaxHarvests.Deluxe</td>
                    <td>@crop.CalculatedValues.MaxHarvests.DeluxeAndAgriculturalist</td>
                    <td>@Math.Round(crop.CalculatedValues.GoldPerDay.Normal, 2)</td>
                    <td>@Math.Round(crop.CalculatedValues.GoldPerDay.SpeedGroOrAgriculturalist, 2)</td>
                    <td>@Math.Round(crop.CalculatedValues.GoldPerDay.SpeedGroAndAgriculturalist, 2)</td>
                    <td>@Math.Round(crop.CalculatedValues.GoldPerDay.Deluxe, 2)</td>
                    <td>@Math.Round(crop.CalculatedValues.GoldPerDay.DeluxeAndAgriculturalist, 2)</td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="col-md-1"></div>
    
</div>



